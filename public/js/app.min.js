var App=angular.module("App",[]);App.config(["$httpProvider",function(a){a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",a.defaults.headers.post["X-CSRF-TOKEN"]=angular.element('meta[name="_token"]').attr("content"),a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]),App.run(["$rootScope",function(a){a.baseUrl=angular.element("base").attr("href"),a.loading=!1,a.messages=[]}]),App.service("ApiService",["$http","$timeout",function(a,b){return this.url="api/v1/",this.get=function(a,b,c){this.request("GET",a,b,c)},this.post=function(a,b,c){this.request("POST",a,b,c)},this.request=function(c,d,e,f){var g={url:this.url+d,method:c};switch(c){case"GET":case"get":g.params=e;break;case"POST":case"post":g.data=$.param(e)}a(g).then(function(a){b(function(){f(a.data)},1e3)})},this}]),App.factory("AuthFactory",["$rootScope","$http","$timeout",function(a,b,c){var d=a.baseUrl,e={};return e.login=function(a,b){var c={url:d+"login/attempt",method:"POST",data:$.param(a)};e.request(c,b)},e.request=function(a,d){b(a).then(function(a){c(function(){d(a)},1e3)})},e}]),App.service("ScheduleService",["ApiService",function(a){return this.search=function(b,c){a.get("schedules/search",b,c)},this}]),App.directive("btnSubmit",[function(){return{template:'<button type="submit" class="btn btn-success waves-effect waves-light"></button>',replace:!0,transclude:!0,restrict:"E",link:function(a,b,c){}}}]),App.directive("btnLink",[function(){return{template:'<a class="btn btn-info waves-effect waves-light" ng-transclude></a>',replace:!0,transclude:!0,restrict:"E",link:function(a,b,c){}}}]),App.directive("materialSelect",["$timeout",function(a){return{template:"<select></select>",transclude:!0,replace:!0,restrict:"E",link:function(b,c,d){a(function(){c.material_select()})}}}]),App.directive("preloaderCircle",[function(){return{templateUrl:"templates/preloader-circle.html",replace:!0,restrict:"E",link:function(a,b,c){}}}]),App.controller("AuthController",["$scope","$timeout","AuthFactory",function(a,b,c){a.form={username:"",password:""},a.login=function(d){d.preventDefault(),a.loading=!0,a.messages=[],c.login(a.form,function(c){c.data.status?(a.messages.push({type:"success",message:c.data.message}),b(function(){window.location=a.baseUrl},1e3)):(a.loading=!1,a.messages.push({type:"error",message:c.data.message}))})},window.scope=a}]),App.controller("HomeController",["$scope",function(a){}]),App.controller("ScheduleController",["$scope","ScheduleService",function(a,b){a.loader=!1,a.search=function(c){c.preventDefault(),c.stopPropagation(),a.loader=!0,b.search(a.form,function(b){a.loader=!1,a.schedules=b.schedules})},a.canSearch=function(){return!a.form.departure&&!a.form.arrival||a.loader?"disabled":""},a.getCurrentDate=function(){return new Date},window.scope=a}]),App.controller("StationController",["$scope",function(a){window.scope=a}]);